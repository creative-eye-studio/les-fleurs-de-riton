{% extends 'admin.html.twig' %}

{% block title %}Interface d'administration{% endblock %}

{% block body %}
<!-- Col Contenu du CMS -->
<section class="row col-3">
    <div class="block">
        <h2>Dernières pages</h2>
        {% for page in pagesList %}
            <div class="line">
                <p>{{ page.pagename }}</p>
                <ul>
                    <li><a href="{{ path('web_page', {page_slug: page.pageurl}) }}" target="_blank" rel="noopener">Voir</a></li>
                </ul>
            </div>
        {% endfor %}
        
        <p>
            <a class="btn-link mt">Voir toutes les pages</a>
        </p>
    </div>
    <div class="block">
        <h2>Derniers articles</h2>
        {% for post in postsList %}
            <div class="line">
                <p>{{ post.postname }}</p>
                <ul>
                    <li><a href="{{ path('web_post', {post_url: post.posturl}) }}" target="_blank" rel="noopener">Voir</a></li>
                </ul>
            </div>
        {% endfor %}
        <p>
            <a class="btn-link mt">Voir tous les articles</a>
        </p>
    </div>
    <div class="block">
        <h2>Utilisateurs</h2>
        {% for user in usersList %}
            <div class="line">
                <p>{{ user.firstname }} {{ user.lastname }}</p>
                <ul>
                    {% if is_granted('ROLE_EDITOR') %}
                        <li><a href="{{ path('admin_users_modify', { id: user.id }) }}">Modifier</a></li>
                        <li><a href="{{ path('admin_users_delete', { id: user.id }) }}">Supprimer</a></li>
                    {% endif %}
                </ul>
            </div>
        {% endfor %}
        <p>
            <a class="btn-link mt">Gérer les utilisateurs</a>
        </p>
    </div>
</section>

<!-- Col Infos versions -->
<section class="row col-1">
    <div class="block">
        <h2>Informations du CMS</h2>
        <p>
            Version du CMS : 1.1<br />
            Dernière mise à jour : 05/05/2023<br />
            Symfony Ver. : 6.2<br />
            PHP Ver. : {{ phpversion }}<br />
            Conception et développement :  Creative Eye Studio
        </p>
        {# <p>
            <a class="btn-link">Mettre à jour le CMS</a>
        </p> #}
    </div>
</section>
{% endblock %}
